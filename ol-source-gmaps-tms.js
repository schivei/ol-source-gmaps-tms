// Generated by CoffeeScript 1.9.3
(function() {
  ol.source.GMapsTMS = function(options) {
    var defaults, i, ol_version, origin, resolutions, results, type;
    resolutions = (function() {
      results = [];
      for (i = 28; i >= 1; i--){ results.push(i); }
      return results;
    }).apply(this);
    origin = [0, 0];
    defaults = {
      layer: 'map',
      resolutions: resolutions,
      origin: origin
    };
    ol_version = 'v3.7.0+';
    if (typeof options === 'undefined' || !options) {
      options = defaults;
    }
    if (typeof options.layer === 'undefined' || !options.layer) {
      options.layer = 'map';
    }
    if (typeof options.resolutions === 'undefined' || !options.resolutions) {
      options.resolutions = resolutions;
    }
    if (typeof options.origin === 'undefined' || !options.origin) {
      options.origin = origin;
    }
    if (typeof options.ol_version === 'undefined' || !options.ol_version) {
      options.ol_version = ol_version;
    }
    type = 'm';
    switch (options.layer) {
      case 'map':
        type = 'm';
        break;
      case 'terrain':
        type = 't';
        break;
      case 'terrain+':
        type = 'p';
        break;
      case 'satellite':
        type = 's';
        break;
      case 'hybrid':
        type = 'y';
        break;
      default:
        options.layer = 'map';
    }
    if (options.ol_version === 'v3.7.0+') {
      return new ol.source.XYZ({
        url: 'http://mt.google.com/vt/lyrs=' + type + '&x={x}&y={y}&z={z}'
      });
    } else {
      return new ol.source.XYZ({
        crossOrigin: null,
        tileUrlFunction: function(coord) {
          var x, y, z;
          if (!coord) {
            return '';
          }
          z = coord[0];
          x = coord[1];
          y = coord[2];
          return "http://mt.google.com/vt/lyrs=" + type + "&x=" + x + "&y=" + y + "&z=" + z;
        },
        tileGrid: new ol.tilegrid.TileGrid({
          origin: options.origin,
          resolutions: options.resolutions
        })
      });
    }
  };

}).call(this);
